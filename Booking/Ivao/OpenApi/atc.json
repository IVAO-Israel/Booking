{"openapi":"3.0.0","paths":{"/v2/atc/bookings":{"get":{"operationId":"BookingsController_findAll","parameters":[{"name":"date","required":false,"in":"query","description":"Booking date","schema":{"type":"string"}},{"name":"page","required":false,"in":"query","description":"The number of the page","schema":{"default":1,"type":"number"}},{"name":"perPage","required":false,"in":"query","description":"The number of elements per page","schema":{"maximum":100}}],"responses":{"200":{"description":"Paginated Bookings","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedBookings"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}}},"security":[{"oauth2":[]},{"consumer":[]}],"tags":["ATC Bookings"]},"post":{"operationId":"BookingsController_create","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingRequestDto"},"examples":{"Normal":{"value":{"atcPosition":"EDDM_TWR","training":null,"voice":true,"startDate":"2023-09-10T14:00:00+02:00","endDate":"2023-09-10T15:00:00+02:00"}},"Training":{"value":{"atcPosition":"EDDM_TWR","training":"training","voice":true,"startDate":"2023-09-10T14:00:00+02:00","endDate":"2023-09-10T15:00:00+02:00"}},"Exam":{"value":{"atcPosition":"EDDM_TWR","training":"exam","voice":true,"startDate":"2023-09-10T14:00:00+02:00","endDate":"2023-09-10T15:00:00+02:00"}}}}}},"responses":{"200":{"description":"Created Booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponseDto"}}}},"400":{"description":"BadRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}}},"security":[{"oauth2":[]},{"consumer":[]},{"oauth2":[]},{"oauth2":[]},{"oauth2":["bookings:write"]}],"tags":["ATC Bookings"]}},"/v2/atc/bookings/daily":{"get":{"operationId":"BookingsController_dailyBookings","parameters":[{"name":"position","required":false,"in":"query","description":"Show bookings for a specific position","schema":{"type":"string"}},{"name":"date","required":false,"in":"query","description":"Booking date, if none will use current date","schema":{"type":"string"}}],"responses":{"200":{"description":"All Bookings for a given date","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BookingResponseDto"}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}}},"security":[{"oauth2":[]},{"consumer":[]}],"tags":["ATC Bookings"]}},"/v2/atc/bookings/{id}":{"get":{"operationId":"BookingsController_findOne","parameters":[{"name":"id","required":true,"in":"path","description":"Booking id","schema":{"type":"number"}}],"responses":{"200":{"description":"Booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}},"404":{"description":"NotFound","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}}},"security":[{"oauth2":[]},{"consumer":[]}],"tags":["ATC Bookings"]},"put":{"operationId":"BookingsController_update","parameters":[{"name":"id","required":true,"in":"path","description":"Booking id","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingRequestDto"}}}},"responses":{"200":{"description":"Updated booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponseDto"}}}},"400":{"description":"BadRequest","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}},"404":{"description":"NotFound","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}}},"security":[{"oauth2":[]},{"consumer":[]},{"oauth2":[]},{"oauth2":[]},{"oauth2":["bookings:write"]}],"tags":["ATC Bookings"]},"delete":{"operationId":"BookingsController_delete","parameters":[{"name":"id","required":true,"in":"path","description":"Booking id","schema":{"type":"number"}}],"responses":{"200":{"description":"Deleted booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingResponseDto"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}},"404":{"description":"NotFound","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SwaggerResponsesDto"}}}}},"security":[{"oauth2":[]},{"consumer":[]},{"oauth2":[]},{"oauth2":[]},{"oauth2":["bookings:write"]},{"oauth2":[]}],"tags":["ATC Bookings"]}}},"info":{"title":"IVAO ATC Scheduling System","description":"IVAO ATC API","version":"1.0","contact":{"name":"IVAO Web Services","url":"https://wiki.ivao.aero/en/home/devops/api/documentation-v2","email":"web@ivao.aero"}},"tags":[],"servers":[],"components":{"securitySchemes":{"oauth2":{"scheme":"bearer","bearerFormat":"JWT","type":"openIdConnect","openIdConnectUrl":"https://api.ivao.aero/.well-known/openid-configuration"},"consumer":{"type":"apiKey","scheme":"https","in":"header","name":"apiKey"}},"schemas":{"SwaggerResponsesDto":{"type":"object","properties":{"statusCode":{"type":"number"},"message":{"type":"string"},"error":{"type":"string"},"error_uri":{"type":"string"}},"required":["statusCode","message","error","error_uri"]},"UserSubQuery":{"type":"object","properties":{"id":{"type":"number"},"divisionId":{"type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"}},"required":["id","divisionId","firstName","lastName"]},"AtcPositionDto":{"type":"object","properties":{"id":{"type":"number"},"airportId":{"type":"string"},"atcCallsign":{"type":"string"},"military":{"type":"boolean"},"frequency":{"type":"number"},"composePosition":{"type":"string"}},"required":["id","airportId","atcCallsign","military","frequency","composePosition"]},"SubcenterDto":{"type":"object","properties":{"id":{"type":"number"},"centerId":{"type":"string"},"atcCallsign":{"type":"string"},"military":{"type":"boolean"},"frequency":{"type":"number"},"composePosition":{"type":"string"}},"required":["id","centerId","atcCallsign","military","frequency","composePosition"]},"SchedulingTrainingType":{"type":"string","enum":["training","exam"]},"BookingResponseDto":{"type":"object","properties":{"id":{"type":"number"},"user":{"$ref":"#/components/schemas/UserSubQuery"},"atcPosition":{"type":"string"},"atcPositionRef":{"$ref":"#/components/schemas/AtcPositionDto"},"subcenter":{"type":"string"},"subcenterRef":{"$ref":"#/components/schemas/SubcenterDto"},"startDate":{"format":"date-time","type":"string"},"endDate":{"format":"date-time","type":"string"},"voice":{"type":"boolean"},"training":{"allOf":[{"$ref":"#/components/schemas/SchedulingTrainingType"}]},"createdAt":{"format":"date-time","type":"string"}},"required":["id","user","atcPosition","atcPositionRef","subcenter","subcenterRef","startDate","endDate","voice","training","createdAt"]},"PaginatedBookings":{"type":"object","properties":{"totalItems":{"type":"number"},"perPage":{"type":"number"},"page":{"type":"number"},"pages":{"type":"number"},"items":{"type":"array","items":{"$ref":"#/components/schemas/BookingResponseDto"}}},"required":["totalItems","perPage","page","pages","items"]},"BookingRequestDto":{"type":"object","properties":{"atcPosition":{"type":"string"},"voice":{"type":"boolean"},"training":{"allOf":[{"$ref":"#/components/schemas/SchedulingTrainingType"}]},"startDate":{"type":"string"},"endDate":{"type":"string"}},"required":["atcPosition","voice","training","startDate","endDate"]}}}}